



![slp1]()

한 권으로 읽는 컴퓨터 구조와 프로그래밍

조너선 스타인하트 지음. 오현석 옮김. 책만



:toc



# 2장 전자 회로의 조합 논리

: 컴퓨터는 어떤 논리로 비트를 다루는가



이번 장에서는 왜 '비트'를 컴퓨터 내부언어로 사용하는지에 대해서 알아본다. 2장에서는 비트에 대해 동작하는 장치인 하드웨어 중 조합논리(combinational logic)에 대해서 알아본다.



## 1. 아날로그와 디지털의 차이

> 전자기술에 대해 이야기할 때 아날로그는 연속적인 것을 뜨하며, 디지털은 이산적인 것을 뜻한다. 

실수를 표현하기에 아날로그가 더 적합해 보일 수 있지만, 정밀도의 문제가 있기 때문에 현대 컴퓨터 계산은 디지털를 사용한다.



## 하드웨어에서 크기가 중요한 이유

컴퓨터에서 전자의 여행 시간을 최소화하는 방법은 부품을 가능한 한 가깝게 위치시키는 것이기 때문에 컴퓨터에서 모든 것을 작게 만들면 더 높은 성능을 달성할 수 있을 것이다. 하드웨어를 작게 만들면 필요한 여행 거리가 줄어들고 여행 거리가 줄어들면 필요한 에너지 양도 줄어든다. 이는 결국 저 전력 소모와 열 발생 감소로 이어지며, 계산장치의 역사가 하드웨어를 작게 만들려는 노력으로 점철된 이유이다.



## 디지털을 사용하면 더 안정적인 장치를 만들 수 있다

하드웨어를 작게 만들면 속도와 효율은 좋아지지만, 물체가 너무 작아지면 서로 간섭하기 아주 쉬워진다. 이런 간섭으로 잡음이 발생할 수 있다. 잡음을 막기 위한 방법들을 알아보자.



외부의 잡음을 막기 위해 디지털(이산적인) 장치를 사용한다. 이산적인 장치는 판정 기준(decision criteria)이 있기 때문에 이 기준에 미달하는 잡음은 영향을 미치지 못하게 된다. 이렇게 이산적인 장치를 도입하는 것은 가장 가까운 정수로 반올림하는 것과 비슷하다.

하드웨어 내부의 관점으로 보면 전기는 멀리 떨어진 물체에 영향을 끼칠 수 있기 때문에, 내부의 간섭도 고려해야 한다. 누화(crosstalk) 효과를 방지할 방법이 없기 때문에 더 높은 판정 기준을 통해 잡음 내성(noise immunity)을 갖는 디지털 회로를 사용한다. 이 역시 판정 기준을 도입해서 해결한다.

> 판정 기준을 도입해 생기는 안정성이 우리가 디지털(이산적인) 컴퓨터를 만드는 주된 이유다......세상은 아날로그인(연속적인) 장소다. 다음 절에서는 아날로그 세계를 어떻게 조작해서 안정적인 계산 장치를 만드는데  필요한 디지털적 동작을 얻어낼 수 있는지 살펴본다.



## 아날로그 세계에서 디지털 만들기: 전이함수

**전이함수(transfer function)**

카메라 센서에서 전이 함수는 광선이 입력으로 들어왔을 때 기록된 밝기를 출력으로 내보내는데, 이때 목표는 빛이 직선부에 많이 닿게 해서 현실을 잘 반영하는 이미지를 얻게 한다. 이처럼 빛이 선형 영역에 닿게 하기 위해 카메라의 셔터 속도나 조리개를 조절하는 장치를 이용한다. 증폭 회로(amplifier circuit)도 이런 전이함수를 이용하는데, 볼륨은 게인(gain) 또는 곡선이 가파른 정도를 조정한다. 게인이 높으면 곡선이 가팔라지고 출력도 커진다. 만약 게인이 고정된 증폭기를 사용하면 (그래프가 거의 step function 같이 생겼음) 출력에서 `왜곡(distortion)`이 발생한다. 이렇게 판정기준에 따라 출력기준이 극단적으로 변하는 왜곡을 이용해서 연속적인 공간을 이산적인 영역으로 나눠준다. 우리는 전이함수의 하단부와 상단부 영역을 활용하며, 전기 엔지니어들은 하단부 영역을 차단(cutoff)이라고 부르고 상단부 영역을 포화(saturation)라고 부른다. `비트를 사용하면 재량권이 아주 커진다. 전이 함수가 아주 가파르기 때문에 출력이 한 값에서 다른 값으로 아주 급하게 바뀌기 때문이다`???



전이 함수를 보고 생각나는 것은 시그모이드 함수이다. 이진분류를 하기 위해 사용하는 함수로 연속적인 값들을 역치에 따라서 두 개의 이산적인 값으로 나눠주는데, 여기서는 전이함수라는 개념으로 설명을 한다.  



더 찾아봐야 할 것: 활성화 함수에서 비선형화를 시키기 위해 ReLU, Sigmoid 등을 쓰는데 여기서는 양 극단으로 빠지는 기울기 소실/폭발을 막기 위해 노력하잖아. 그래서 직선영역에 많이 닿게 하려고 한다고 볼 수 있는데, 그럼 비선형적으로 만들어서 NN을 깊게 쌓되, 최대한 그래디언트를 보존하려기에 여러 트릭을 쓰는 건가?? 애초에 전이함수랑 활성화 함수랑 비슷한 모양의 함수 쓴다는 것만 공통점일까?



## 10진 '숫자' 대신 비트를 사용하는 이유

하드웨어에서 비트가 숫자보다 더 좋은 이유는 더 효율적이기 때문이다. 만약 손가락 10개를 이용해서 숫자를 센다면 10까지밖에 못 세겠지만, 손가락 하나를 비트라고 생각하면 1024까지 셀 수 있다. 또한 숫자를 사용하면 전이 함수를 각기 다른 10가지 문턱값(역치)으로 구분할 수 있는 간단한 방법이 없기 때문이다. 



## 2. 전기 이론

전기는 배터리 같은 에너지 근원에서 나온다. 

본 책에서는 물이 흐르는 게이트 밸브를 이용해서 선을 통해 이동하는 전기를 표현한다. 0은 밸브가 닫힌 상태를, 1은 밸브가 열린 상태이다. AND 연산은 직렬 연결을 통해서 , OR 연산은 병렬 연결을 통해서 구현한다. 물이 파이프를 흘러 전달되는데 시간이 걸리는 것처럼, 전기가 컴퓨터 칩 내부에서 전파되는데 시간이 걸리는 것을 **전파지연**(propagation delay)라고 한다.



`전기의 이동은 실제로는 전자의 흐름은 아니고 전자기 에너지 반응이 전파되는 현상을 과거에 전기라고 불렀더 이 단어가 정착한 것이다.`-> 더 찾아봐야 할듯



전기 선은 내부 금속인 **도체**(conductor)과 금속 바깥쪽인 **부도체**(insulator)로 이루어져 있다. 전기의 흐름을 제어하는 밸브는 **스위치**(switch)이다.  전기를 흐르게 하는 수압에 해당하는 존재는 **전압**(voltage)이며 측정 단위는 볼트(volt)이다. 전기 흐름의 양은 **전류**(current, I)이고 측정단위는 암페어(ampere)다. 너무 가는 도체를 사용함으로 인해 전류가 커지지 못하게 하는 **저항**(resistance)을 측정할 때는 옴(ohm)을 쓴다. 이 세가지 변수는 옴의 법칙을 통해 I = V/R 이라는 관계를 갖는다. 즉 전류는 전압을 저항으로 나눈 값과 같다. 저항은 전기를 열로 바꾸기 때문에 이 원리를 이용해서 전열기구가 작동한다.

<br>

## 전기 스위치

<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/SPST-Switch.svg/1920px-SPST-Switch.svg.png" style="zoom:33%;" />

전기에 사용할 스위치(밸브)를 만드는 일은 도체 사이에 부도체를 삽입하거나 제거하는 문제이다. 스위치가 열려 있으면 전기가 통하지 않고, 닫혀 있으면 전기가 통한다. 전기 시스템은 회로(circuit)라고 부르며, 스키매틱(schematic diagrams)으로 문서화한다. 

##### 스키매틱에서의 점은 선이 연결된 것을 뜻하고, 선들이 교차하더라도 점이 없으면 연결되지 않은 것이다.

스위치의 **극**(pole)이란 한꺼번에 연결되어 이동하는 스위치의 수를 말한다. **단투**(single throw)는 접점이 하나뿐이라는 뜻이다. 단극단투(SPST, single-pole, single-throw), 쌍극쌍투(double-pole, double-throw) 이런식으로 쓴다.

파선된 것(점선으로 표현된 것)은 두 극이 서로 연계(ganged) 됐다는 표시이며, 두 스위치가 함께 움직인다는 뜻이다.



**회로:** 전기는 에너지 근원에서 나와서 회로 구성요소를 지나서 다시 근원으로 돌아간다. 전기는 스위치가 열려 있으면 흐르지 못한다. 스위치가 닫히면 전류가 전원에서 나와 스위치를 통과한 다음 전구를 흐르고 다시 전원으로 돌아간다. 



## 3. 비트를 처리하기 위한 하드웨어

## 릴레이

릴레이(relay, 계전기)는 스위치를 움직이기 위해 전자석을 사용하는 장치이다. 전선을 둥글게 감아 코일로 만들고 전기를 흘려보내면 코일이 전자석(electromagnet)이 된다. 전자석은 켜고 끌 수 있어 물건을 움직일 때 활용가능하고, 선으로 만든 코일 주변에서 자석을 움직이면 전기가 생긴다. (역 EMF(back-EMF))



릴레이를 사용하면 스위치로는 불가능한 일을 할 수 있다. 릴에를 사용하면 NOT함수를 구현하는 인버터(inverter)를 만들 수 있다. NOT함수가 있으면 모든 불리언 연산을 표현할 수 있어(함수적으로 완결적) 이를 이용해서 복잡한 논리를 만들 수 있다. 릴레이에서 전이 함수의 문턱값이 수직이기 때문에 코일에 가하는 전압을 아무리 천천히 높여도 스위치는 항상 다른 위치로 단숨에 움직인다. 라그랑주-해밀턴 방정식에서 문턱에서 전이함수의 값이 정의되지 않기 때문에 스위치 접점이 순식간에 이동한다고 한다.



릴레이의 단점: 릴레이는 느리고 전기를 많이 소모하며 먼지가 스위치 접점에 있으면 제대로 작동하지 않는다. 또한 스위치의 접점을 이용해 다른 릴레이를 제어하기 때문에 코일의 전원을 갑자기 끄면 순간적으로 초고압이 발생해서 접점이 마모된다. 



## 진공관

물체를 충분히 가열하면 전자가 튀어나오는 열전자 방출(thermionic emission)이라는 현상을 기반으로 진공관이 만들어졌음. 진공관 안에는 캐소드와 캐소드를 가열하는 히터가 있는데, 캐소드에서 발생한 전자는 진공 속에서 애노드로 날아간다.



진공관의 장점: 움직이는 부분이 없어서 릴레이보다 훨씬 더 빠르다



진공관의 단점: 전구와 마찬가지로 아주 뜨겁고 꺠지기 쉽다.



## 트랜지스터

전송 저항(transfer resistor)이라는 말을 줄인 것.

진공관과 비슷하지만 반도체라는 특별한 물질을 사용한다. 반도체는 쉽게 녹을 수 있어 트랜지스터에서 열을 제거해야 한다. 트랜지스터는 반도체 물질로 이루어진 기판(substrate) 또는 슬랩(slab) 위에 만들어진다. 실리콘이 재료로 쓰인다. 트랜지스터는 트랜지스터 그림을 실리콘 웨이퍼(wafer) 위에 투영해서 현상하는 광식각(photolithography)라는 과정을 통해서 만들어진다. 



## 집적 회로

트랜지스터를 사용하면 간단한 회로를 만들 때도 부품이 너무 많이 필요했지만, 집적 회로(Integrated circuit)를 사용하면 복잡한 시스템을 저렴하게 만들 수 있다. 집적 회로는 chip이라고도 불리며 이 칩들에는 논리 연산을 수행하는 회로가 미리 들어가 있다.



## 4. 논리 게이트

집적 회로에 들어가 있는 논리 연산을 수행하는 회로를 논리 게이트(logic gate, 혹은 게이트)라고 부른다. 이런 게이트를 조합해서 복잡한 연산을 쉽게 구현할 수 있다. 

<img src="https://www.cloudsavvyit.com/p/uploads/2021/05/22e2d43d.png?width=1198&trim=1,1&bg-color=000&pad=1,1" style="zoom:50%;" />

* 버퍼: 단지 입력을 출력으로 전달
* 인버터: 다른 논리값으로 변환



가장 단순한 회로는 NAND나 NOR는 논리 게이트에서 가장 단순한 회로이며, AND나 OR보다 속도도 빠르고 전력소모도 적다.



## 이력 현상을 활용한 잡음 내성 향상

디지털 장치를 이용해 `판정기준`에 의해 잡음 내성을 얻는 것만으로 충분하지 않을 때 이력현상을 활용해서 잡음 내성을 향상 시킨다. 잡음으로 인해 입력 신호가 문턱값을 여러번 오가며 출력 신호에 글리치가 생기는데, 이를 이력현상(hysteresis)을 사용해 방지할 수 있다. 이력현상은 판정 기준을 과거의 이력에 영향을 받게 한다. 올라가는 신호와 내려가는 신호의 전이함수를 다르게 주어 각각 다른 문턱값이 생기면, 출력이 반전되기 위해 값이 더 크게 변해야 해서 잡음 내성이 커진다.



ex) 슈미트 트리거 게이트





## 차동 신호

차동 신호는 상대적 위치를 이용해서 잡음 내성을 높인다. 이것의 예는 연선 케이블링인데,  두 선의 차이의 변화를 기준으로 삼기 때문에 두 선에게 동시에 영향을 주는 잡음의 영향력이 약해지게 된다.



## 전파 지연

![]



위의 스키매틱을 보면 A와  B에서 입력이 들어오고, B에서 들어온 전기는 중간에 음으로 바뀌고 C지점에서 지연이 일어난다. 이 두 전기는 NAND 게이트를 거치면서 D로 출력된다. 옆의 그림을 보면 A는 1, B는 0이기 때문에 D에서는 0이 출력되는데 전파 지연으로 회색 영역이 생긴다.



## 출력 유형

* 토템폴 출력
* 오픈 컬렉터 출력
* 트라이스테이트 출력



## 게이트를 조합한 복잡한 회로

---



책 표지에 분명히 '비전공자도 재밌게 읽은' 이랬는데... 스키매틱 기호를 어떻게 읽는지 더 자세한 설명이 있었으면 좋을 것 같다. 


